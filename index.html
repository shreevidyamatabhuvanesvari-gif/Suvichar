<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ЁЯМ▒ рд╕реБрд╡рд┐рдЪрд╛рд░</title>

<style>
body{
  margin:0;
  font-family:system-ui,"Noto Sans Devanagari",sans-serif;
  background:linear-gradient(135deg,#fdf6e3,#e0f2f1);
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}

/* APP CONTAINER */
.app{
  width:94%;
  max-width:420px;
  background:#ffffff;
  border-radius:22px;
  padding:18px;
  text-align:center;
  box-shadow:0 12px 28px rgba(0,0,0,.15);

  display:flex;
  flex-direction:column;
}

/* ORDERING */
h1{ order:1; margin:0; color:#2e7d32; }
.quote-box{ order:2; }
img{ order:3; }
.controls{ order:4; }
textarea{ order:5; }

/* TEXT INPUT */
textarea{
  width:100%;
  min-height:70px;
  padding:10px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:15px;
  margin-top:12px;
  resize:none;
}

/* QUOTE DISPLAY */
.quote-box{
  min-height:90px;
  font-size:20px;
  line-height:4.5;
  margin:14px 0;
  font-weight:600;
  word-break:normal;
  overflow-wrap:break-word;
}

.char{
  display:inline-block;
  white-space:pre;
  transition:transform .2s;
}
.char.active{
  transform:scale(1.3);
}

/* IMAGE */
img{
  width:100%;
  max-width:300px;      /* ЁЯСИ рдЪреМрдбрд╝рд╛рдИ рдХрдо */
  height:auto;          /* рдЕрдиреБрдкрд╛рдд рд╕реБрд░рдХреНрд╖рд┐рдд */
  aspect-ratio: 4 / 5;  /* ЁЯСИ рд╕реБрдВрджрд░ рдХрд╛рд░реНрдб рдЬреИрд╕рд╛ рдЕрдиреБрдкрд╛рдд */
  object-fit:cover;     /* рдЗрдореЗрдЬ рдХрдЯреЗ рдмрд┐рдирд╛ рдлрд┐рдЯ */

  border-radius:14px;
  margin:10px auto;     /* center */
  display:block;

  transition:transform .6s, box-shadow .6s, filter .6s;
}

button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  background:#2e7d32;
  color:#fff;
  font-size:14px;
  cursor:pointer;
}
button.secondary{ background:#1565c0; }
button.gray{ background:#555; }

input[type=file]{ display:none; }
</style>
</head>

<body>

<div class="app">
  <h1>ЁЯМ▒ рд╕реБрд╡рд┐рдЪрд╛рд░</h1>

  <div id="quoteBox" class="quote-box" aria-live="polite"></div>

  <img id="quoteImg"
       alt="рд╕реБрд╡рд┐рдЪрд╛рд░ рдЪрд┐рддреНрд░"
       src="https://images.unsplash.com/photo-1506784983877-45594efa4cbe"
       onerror="this.style.display='none'"/>

  <div class="controls">
    <button id="playBtn">ЁЯО┤ рдХрд╛рд░реНрдб рдмрдирд╛рдУ</button>
    <button class="secondary" id="themeBtn">ЁЯОи рдереАрдо рдмрджрд▓реЛ</button>
    <button class="gray" id="imgBtn">ЁЯУ╖ рдЗрдореЗрдЬ рдЬреЛрдбрд╝реЛ</button>
  </div>

  <textarea id="inputText" placeholder="рдЕрдкрдирд╛ рд╕реБрд╡рд┐рдЪрд╛рд░ рд▓рд┐рдЦреЗрдВ..."></textarea>

  <input type="file" id="imgInput" accept="image/*">
</div>

<script>
(() => {
  "use strict";

  const inputText = document.getElementById("inputText");
  const quoteBox  = document.getElementById("quoteBox");
  const quoteImg  = document.getElementById("quoteImg");
  const imgInput  = document.getElementById("imgInput");

  const playBtn  = document.getElementById("playBtn");
  const themeBtn = document.getElementById("themeBtn");
  const imgBtn   = document.getElementById("imgBtn");

  let wordTimer = null;

  /* COLORS */
  const COLORS = [
    "#e53935","#8e24aa","#3949ab",
    "#039be5","#00897b",
    "#7cb342","#f9a825",
    "#fb8c00","#6d4c41"
  ];

  function randomColor(){
    return COLORS[Math.floor(Math.random()*COLORS.length)];
  }

  /* THEMES */
  const THEMES = [
    ["#fdf6e3","#e0f2f1"],
    ["#fce4ec","#f3e5f5"],
    ["#e3f2fd","#fff3e0"],
    ["#ede7f6","#e8f5e9"]
  ];
  let themeIndex = 0;

  function changeTheme(){
    themeIndex = (themeIndex + 1) % THEMES.length;
    document.body.style.background =
      `linear-gradient(135deg,${THEMES[themeIndex][0]},${THEMES[themeIndex][1]})`;
  }

  /* VOICE */
  function speak(text){
    if(!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "hi-IN";
    u.rate = 0.75;
    u.pitch = 1.05;
    speechSynthesis.speak(u);
  }

  /* MAIN LOGIC */
  function playSuVichar(){
    const text = inputText.value.trim();
    if(!text){
      alert("рдХреГрдкрдпрд╛ рд╕реБрд╡рд┐рдЪрд╛рд░ рд▓рд┐рдЦреЗрдВ");
      return;
    }

    quoteBox.innerHTML = "";
    speak(text);

    quoteImg.classList.add("pulse");
    setTimeout(()=>quoteImg.classList.remove("pulse"),1500);

    if(wordTimer) clearInterval(wordTimer);

    const words = text.split(" ");
    let i = 0;

    wordTimer = setInterval(()=>{
      const span = document.createElement("span");
      span.className = "char active";
      span.style.color = randomColor();

      const w = words[i];
      const needsSpace = !/[ред.,!?"]$/.test(w);
      span.innerHTML = w + (needsSpace ? "&nbsp;" : "");

      quoteBox.appendChild(span);

      const prev = quoteBox.querySelectorAll(".char");
      if(prev.length > 1){
        prev[prev.length - 2].classList.remove("active");
      }

      i++;
      if(i >= words.length){
        clearInterval(wordTimer);
        wordTimer = null;
      }
    }, 300);
  }

  function pickImage(){
    imgInput.click();
  }

  imgInput.addEventListener("change", () => {
    const file = imgInput.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = e => quoteImg.src = e.target.result;
    reader.readAsDataURL(file);
  });

  playBtn.onclick  = playSuVichar;
  themeBtn.onclick = changeTheme;
  imgBtn.onclick   = pickImage;

})();
</script>

</body>
</html>
