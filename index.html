<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå± ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞</title>

<style>
body{
  margin:0;
  font-family:system-ui,"Noto Sans Devanagari",sans-serif;
  background:linear-gradient(135deg,#fdf6e3,#e0f2f1);
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}

.app{
  width:94%;
  max-width:420px;
  background:#ffffff;
  border-radius:22px;
  padding:18px;
  text-align:center;
  box-shadow:0 12px 28px rgba(0,0,0,.15);
}

h1{margin:0;color:#2e7d32}

textarea{
  width:100%;
  min-height:70px;
  padding:10px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:15px;
  margin-top:10px;
  resize:none;
}

.quote-box{
  min-height:90px;
  font-size:20px;
  line-height:1.8;
  margin:14px 0;
  font-weight:600;
  word-break:normal;
  overflow-wrap:break-word;
}

.char{
  display:inline-block;
  white-space:pre;
  transition:transform .2s;
}
.char.active{
  transform:scale(1.3);
}

img{
  width:100%;
  border-radius:14px;
  margin:10px 0;
  transition:transform .6s, box-shadow .6s, filter .6s;
}
img.pulse{
  transform:scale(1.05);
  box-shadow:0 0 25px rgba(0,150,136,.6);
  filter:brightness(1.1);
}

.controls{
  display:flex;
  gap:8px;
  margin-top:10px;
}

button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  background:#2e7d32;
  color:#fff;
  font-size:14px;
  cursor:pointer;
}
button.secondary{ background:#1565c0; }
button.gray{ background:#555; }

input[type=file]{ display:none; }
</style>
</head>

<body>

<div class="app">
  <h1>üå± ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞</h1>

  <textarea id="inputText" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>

  <div id="quoteBox" class="quote-box" aria-live="polite"></div>

  <img id="quoteImg"
       alt="‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ö‡§ø‡§§‡•ç‡§∞"
       src="https://images.unsplash.com/photo-1506784983877-45594efa4cbe"
       onerror="this.style.display='none'"/>

  <input type="file" id="imgInput" accept="image/*">

  <div class="controls">
    <button id="playBtn">üé¥ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§ì</button>
    <button class="secondary" id="themeBtn">üé® ‡§•‡•Ä‡§Æ ‡§¨‡§¶‡§≤‡•ã</button>
    <button class="gray" id="imgBtn">üì∑ ‡§á‡§Æ‡•á‡§ú ‡§ú‡•ã‡§°‡§º‡•ã</button>
  </div>
</div>

<script>
(() => {
  "use strict";

  const inputText = document.getElementById("inputText");
  const quoteBox  = document.getElementById("quoteBox");
  const quoteImg  = document.getElementById("quoteImg");
  const imgInput  = document.getElementById("imgInput");

  const playBtn  = document.getElementById("playBtn");
  const themeBtn = document.getElementById("themeBtn");
  const imgBtn   = document.getElementById("imgBtn");

  let charTimer = null;

  /* ‡§∞‡§Ç‡§ó */
  const COLORS = [
    "#e53935","#8e24aa","#3949ab",
    "#039be5","#00897b",
    "#7cb342","#f9a825",
    "#fb8c00","#6d4c41"
  ];

  function randomColor(){
    return COLORS[Math.floor(Math.random()*COLORS.length)];
  }

  /* ‡§•‡•Ä‡§Æ */
  const THEMES = [
    ["#fdf6e3","#e0f2f1"],
    ["#fce4ec","#f3e5f5"],
    ["#e3f2fd","#fff3e0"],
    ["#ede7f6","#e8f5e9"]
  ];
  let themeIndex = 0;

  function changeTheme(){
    themeIndex = (themeIndex+1)%THEMES.length;
    document.body.style.background =
      `linear-gradient(135deg,${THEMES[themeIndex][0]},${THEMES[themeIndex][1]})`;
  }

  /* ‡§Ü‡§µ‡§æ‡§ú‡§º */
  function speak(text){
    if(!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "hi-IN";
    u.rate = 0.75;
    u.pitch = 1.05;
    speechSynthesis.speak(u);
  }

  /* ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§≤‡•â‡§ú‡§ø‡§ï */
  function playSuVichar(){
  const text = inputText.value.trim();
  if(!text){
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç");
    return;
  }

  quoteBox.innerHTML = "";
  speak(text);

  quoteImg.classList.add("pulse");
  setTimeout(()=>quoteImg.classList.remove("pulse"),1500);

  if(charTimer) clearInterval(charTimer);

  // üîë ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§§‡•ã‡§°‡§º‡§®‡§æ (space ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§)
  const words = text.split(" ");
  let i = 0;

  charTimer = setInterval(()=>{
    const span = document.createElement("span");
    span.className = "char active";
    span.style.color = randomColor();

    // ‡§∂‡§¨‡•ç‡§¶ + ‡§è‡§ï space
    const w = words[i];
const needsSpace = !/[‡•§.,!?"]$/.test(w);
span.innerHTML = w + (needsSpace ? "&nbsp;" : "");
    quoteBox.appendChild(span);

    const prev = quoteBox.querySelectorAll(".char");
    if(prev.length > 1){
      prev[prev.length-2].classList.remove("active");
    }

    i++;
    if(i >= words.length){
      clearInterval(charTimer);
      charTimer = null;
    }
  }, 300); // üëà ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§®‡§µ‡•Ä‡§Ø ‡§∏‡•ç‡§™‡•Ä‡§°
}

  function pickImage(){
    imgInput.click();
  }

  imgInput.addEventListener("change", () => {
    const file = imgInput.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = e => quoteImg.src = e.target.result;
    reader.readAsDataURL(file);
  });

  playBtn.onclick  = playSuVichar;
  themeBtn.onclick = changeTheme;
  imgBtn.onclick   = pickImage;

})();
</script>

</body>
</html>
